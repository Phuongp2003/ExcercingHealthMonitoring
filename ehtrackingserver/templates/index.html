<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta
			name="viewport"
			content="width=device-width, initial-scale=1.0" />
		<title>Oxi Sensor Dashboard</title>
		<link
			rel="stylesheet"
			href="/static/css/main.css" />
	</head>
	<body>
		<div class="container">
			<h1>Oxi Sensor Dashboard</h1>

			<div class="card">
				<h2>Connection Status</h2>
				<div
					id="connection-status"
					class="status disconnected">
					Checking connection...
				</div>
				<button
					id="clear-connection"
					class="button clear">
					Clear Connection
				</button>
				<button
					id="check-status"
					class="button check">
					Check Device Status
				</button>
				<div
					id="device-status"
					class="device-status"></div>
			</div>

			<div class="card">
				<h2>Data Collection</h2>
				<div
					class="collection-status"
					id="collection-status"
					style="
						margin-bottom: 15px;
						padding: 10px;
						border-radius: 4px;
						display: none;
					">
					<div style="font-weight: bold">
						Collection Status:
						<span id="status-text">Inactive</span>
					</div>
				</div>
				<button
					id="start-button"
					class="button"
					disabled>
					Start Collection
				</button>
				<button
					id="stop-button"
					class="button stop"
					disabled>
					Stop Collection
				</button>
			</div>

			<div class="card">
				<h2>Vital Signs & Activity</h2>
				<div class="vitals-grid">
					<!-- Row 1: Activity (full width) with confidence in corner -->
					<div class="activity-row">
						<div
							class="activity-badge"
							id="activity-badge">
							Unknown
						</div>
						<div
							class="confidence-badge"
							id="confidence-value">
							Confidence: --
						</div>
					</div>

					<!-- Row 2: Heart rate and SpO2 -->
					<div class="vital-sign">
						<div class="vital-icon">‚ù§Ô∏è</div>
						<div
							class="vital-value"
							id="heart-rate-value">
							--
						</div>
						<div class="vital-label">BPM</div>
					</div>

					<div class="vital-sign">
						<div class="vital-icon">ü´Å</div>
						<div
							class="vital-value"
							id="oxygen-value">
							--
						</div>
						<div class="vital-label">SpO‚ÇÇ %</div>
					</div>

					<!-- Update time in bottom right corner -->
					<div
						class="update-time"
						id="vitals-update-time">
						Updated: --
					</div>
				</div>
			</div>

			<div class="card">
				<h2>Data History (Last 2 Minutes)</h2>
				<div
					id="data-history"
					class="data-history">
					<div class="history-empty">No data available yet</div>
				</div>
			</div>

			<div class="card">
				<h2>Last Data Reading</h2>
				<div id="last-data-container">
					<div id="last-data">No data received yet</div>
					<div
						id="last-data-time"
						class="last-update-time"></div>
				</div>
			</div>
		</div>

		<!-- Toast notifications container -->
		<div
			id="toast-container"
			class="toast-container"></div>

		<!-- Include JavaScript files -->
		<script>
			// Initial state from server
			const initialState = {
				isCollecting: {{ 'true' if is_collecting else 'false' }}
			};
		</script>
		<script src="/static/js/data-handler.js"></script>
		<script src="/static/js/ui-controller.js"></script>
		<script src="/static/js/app.js"></script>
	</body>
</html>
